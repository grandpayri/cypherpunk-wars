<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="version" content="Iteration-6.3">
    <title>CYPHERPUNK WARS | Protocol Spec</title>
    <style>
        :root {
            --kaspa-teal: #70C7BA;
            --kaspa-bright: #49EACB;
            --kaspa-dark: #0A0A0A;
        }
        body {
            background-color: var(--kaspa-dark);
            color: var(--kaspa-teal);
            font-family: 'Courier New', monospace;
            line-height: 1.6; padding: 40px; max-width: 1000px; margin: auto;
        }
        h1, h2, h3 { color: var(--kaspa-bright); border-bottom: 1px solid var(--kaspa-teal); padding-bottom: 10px; margin-top: 40px; }
        .spec-table { width: 100%; border-collapse: collapse; margin: 20px 0; font-size: 0.8rem; }
        .spec-table th, .spec-table td { border: 1px solid var(--kaspa-teal); padding: 10px; text-align: left; }
        .spec-table th { background: rgba(112, 199, 186, 0.1); }
        .memo-box { background: #000; border: 1px dashed var(--kaspa-bright); padding: 20px; margin: 20px 0; word-break: break-all; color: #ff00ff; font-size: 0.9rem;}
        .highlight { color: var(--kaspa-bright); font-weight: bold; }
    </style>
</head>
<body>

    <h1 style="text-align: center;">CPW_PROTOCOL_SPEC v1.3 (EXPANDED)</h1>
    
    <h2>I. THE EXPANDED MEMO FORMAT</h2>
    <p>The state string is a pipe-delimited sequence of 14 core data fields. Units are stored as absolute integers representing troop counts.</p>

    <div class="memo-box">
        CPW1 | Season | Turns | Sectors | PUNKW | U1 | U2 | U3 | U4 | U5 | U6 | U7 | Spells | Items
    </div>

    <h2>II. FIELD INDEX DEFINITIONS</h2>
    <table class="spec-table">
        <thead>
            <tr><th>Index</th><th>Field</th><th>Type</th><th>Description</th></tr>
        </thead>
        <tbody>
            <tr><td>0</td><td>Protocol</td><td>String</td><td><code>CPW1</code></td></tr>
            <tr><td>1</td><td>Season</td><td>Int</td><td>The current era ID</td></tr>
            <tr><td>2</td><td>Turns</td><td>Int</td><td>Total actions taken by Operator</td></tr>
            <tr><td>3</td><td>Sectors</td><td>Int</td><td>Land/Infrastructure count</td></tr>
            <tr><td>4</td><td>PUNKW</td><td>Int</td><td>War Chest balance</td></tr>
            <tr><td>5-11</td><td>Units 1-7</td><td>Int</td><td>Individual counts for 7 troop types</td></tr>
            <tr><td>12</td><td>Spells</td><td>Mask</td><td>25-bit binary string (0=Locked, 1=Known)</td></tr>
            <tr><td>13</td><td>Items</td><td>Mask</td><td>25-bit binary string (0=None, 1=Owned)</td></tr>
        </tbody>
    </table>

    

    <h2>III. ATTACK RESOLUTION (MAINNET CONFLICT)</h2>
    <p>In the absence of the vProgs VM, attacks are resolved via <strong>Client-Side Enforcement</strong>. The DAG records the <em>intent</em> of an attack; the next time the Defender boots their SPA, the logic calculates losses and updates the next State Transaction.</p>

    <p style="text-align:center; margin-top:50px;">
        <a href="index.html" style="color:var(--kaspa-bright);">[ RETURN_TO_BUNKER ]</a>
    </p>

</body>
</html>
